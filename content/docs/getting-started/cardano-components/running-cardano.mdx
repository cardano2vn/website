---
title: Cách chạy cardano-node
description: Hướng dẫn này giải thích và chỉ dẫn cách chạy cardano-node và các thành phần trên hệ thống của bạn.
date: 2024-12-25
author: C2VN
---

# Cách chạy cardano-node

## Tổng quan

Hướng dẫn này sẽ chỉ dẫn bạn cách chạy `cardano-node` và `cardano-cli` trên hệ điều hành của bạn, cùng với một số ví dụ đơn giản về cách tương tác với chuỗi khối Cardano.

<Callout type="note">
  Hướng dẫn này giả định rằng bạn đã cài đặt `cardano-node` và `cardano-cli` trên hệ thống của mình. Nếu chưa, bạn có thể tham khảo hướng dẫn [Cài đặt
  cardano-node](/docs/getting-started/installing-cardano-node) để biết cách thực hiện.
</Callout>

<Callout type="important">
  Hướng dẫn này không bao gồm chủ đề vận hành sản xuất khối `cardano-node` hoặc điều hành **Nhóm cổ phần Cardano**. Để biết thêm thông tin liên quan,
  vui lòng truy cập [Vận hành nhóm cổ phần](/docs/operate-a-stake-pool/).
</Callout>

## Tệp cấu hình

`cardano-node` yêu cầu ít nhất bốn tệp cấu hình để chạy tại thời điểm viết bài:

- **Tệp cấu hình chính**: Chứa các cài đặt nút chung như ghi nhật ký và lập phiên bản. Nó cũng trỏ đến các tệp **Byron Genesis** và **Shelley Genesis**.
- **Byron Genesis**: Chứa các tham số giao thức ban đầu và hướng dẫn `cardano-node` cách khởi động **Kỷ nguyên Byron** của chuỗi khối **Cardano**.
- **Shelley Genesis**: Chứa các tham số giao thức ban đầu và hướng dẫn `cardano-node` cách khởi động **Kỷ nguyên Shelley** của chuỗi khối **Cardano**.
- **Alonzo Genesis**: Chứa các tham số giao thức ban đầu và hướng dẫn `cardano-node` cách khởi động **Kỷ nguyên Alonzo** của chuỗi khối **Cardano**.
- **Topology**: Chứa danh sách các mạng ngang hàng (**Địa chỉ IP** và **Cổng** của các nút khác đang chạy mạng chuỗi khối) mà nút của bạn sẽ kết nối.

<Callout type="important">
  Hiện tại, cấu trúc liên kết của `cardano-node` được thiết lập thủ công bởi cộng đồng các nhà khai thác mạng trong chuỗi khối Cardano. Tuy nhiên, một hệ thống ngang hàng (P2P) tự động đang được phát triển. Để biết thêm thông tin, hãy truy cập [Tăng cường phân quyền mạng với P2P](https://iohk.io/en/blog/posts/2021/04/06/boosting-network-decentralization-with-p2p/).

Để biết thêm về các kỷ nguyên và nâng cấp của chuỗi khối Cardano, vui lòng truy cập [Lộ trình Cardano](https://roadmap.cardano.org/en).

</Callout>

Bạn có thể tải xuống các tệp cấu hình mạng chuỗi khối **Cardano** tại đây:

### Mainnet / Sản xuất

**NetworkMagic**: `764824073`

```bash
curl -O -J https://hydra.iohk.io/build/7370192/download/1/mainnet-config.json
curl -O -J https://hydra.iohk.io/build/7370192/download/1/mainnet-byron-genesis.json
curl -O -J https://hydra.iohk.io/build/7370192/download/1/mainnet-shelley-genesis.json
curl -O -J https://hydra.iohk.io/build/7370192/download/1/mainnet-alonzo-genesis.json
curl -O -J https://hydra.iohk.io/build/7370192/download/1/mainnet-topology.json
```

### Testnet / Môi trường thử nghiệm

**NetworkMagic**: `1097911063`

```bash
curl -O -J https://hydra.iohk.io/build/7654130/download/1/testnet-topology.json
curl -O -J https://hydra.iohk.io/build/7654130/download/1/testnet-shelley-genesis.json
curl -O -J https://hydra.iohk.io/build/7654130/download/1/testnet-config.json
curl -O -J https://hydra.iohk.io/build/7654130/download/1/testnet-byron-genesis.json
curl -O -J https://hydra.iohk.io/build/7654130/download/1/testnet-alonzo-genesis.json
```

<Callout type="note">
  Mỗi mạng có một tệp `config`, tệp `genesis`, tệp `topology`, và một số nhận dạng gọi là **Network Magic**.

Phần này sẽ được cập nhật khi các mạng **Cardano** mới được triển khai với các tệp cấu hình tương ứng và **Network Magic**.

</Callout>

Sự khác biệt giữa `mainnet` và `testnet` là gì, và tại sao có hai mạng? Nói một cách đơn giản, **Cardano** là một chuỗi khối mã nguồn mở, và bất kỳ ai cũng có thể tự do tạo một mạng lưới dựa trên các thành phần phần mềm của **Cardano**. Mạng `mainnet` là mạng đầu tiên được thành lập vào đầu kỷ nguyên **Byron** năm 2017, và tất cả mọi người tham gia đều đồng ý rằng đó là nơi lưu giữ giá trị thực của **Cardano**.

Việc kiểm tra các tính năng và khả năng của mạng có thể tốn kém và sẽ tiêu tốn giá trị thực. Vì vậy, [Input-Output Global](https://iohk.io) đã tạo ra một phiên bản mạng `testnet`. Thay vì sử dụng token `ada` thực cho các giao dịch, bạn sử dụng token `tAda` (Test ADA). **Ngoài ra, bạn có thể tạo mạng Cardano tùy chỉnh của riêng mình**, nhưng điều đó nằm ngoài phạm vi của hướng dẫn này.

## Chạy nút

Để chạy `cardano-node`, bạn nhập lệnh sau vào terminal:

```bash
cardano-node run \
  --topology path/to/mainnet-topology.json \
  --database-path path/to/db \
  --socket-path path/to/db/node.socket \
  --host-addr x.x.x.x \
  --port 3001 \
  --config path/to/mainnet-config.json
```

Để xem danh sách đầy đủ các tùy chọn có sẵn, sử dụng:

```bash
cardano-node run --help
```

Đầu ra sẽ giống như sau:

```plaintext
Usage: cardano-node run [--topology FILEPATH] [--database-path FILEPATH]
                        [--socket-path FILEPATH]
                        [--byron-delegation-certificate FILEPATH]
                        [--byron-signing-key FILEPATH]
                        [--shelley-kes-key FILEPATH]
                        [--shelley-vrf-key FILEPATH]
                        [--shelley-operational-certificate FILEPATH]
                        [--bulk-credentials-file FILEPATH] [--host-addr IPV4]
                        [--host-ipv6-addr IPV6] [--port PORT]
                        [--config NODE-CONFIGURATION] [--validate-db]
  Run the node.

Available options:
  --topology FILEPATH      Đường dẫn đến tệp mô tả cấu trúc mạng.
  --database-path FILEPATH Thư mục nơi trạng thái được lưu trữ.
  --socket-path FILEPATH   Đường dẫn đến socket của cardano-node.
  --byron-delegation-certificate FILEPATH
                           Đường dẫn đến chứng chỉ ủy quyền Byron.
  --byron-signing-key FILEPATH
                           Đường dẫn đến khóa ký Byron.
  --shelley-kes-key FILEPATH
                           Đường dẫn đến khóa ký KES Shelley.
  --shelley-vrf-key FILEPATH
                           Đường dẫn đến khóa ký VRF Shelley.
  --shelley-operational-certificate FILEPATH
                           Đường dẫn đến chứng chỉ vận hành Shelley.
  --bulk-credentials-file FILEPATH
                           Đường dẫn đến tệp thông tin nhóm số lượng lớn.
  --host-addr IPV4         Địa chỉ IPv4 tùy chọn.
  --host-ipv6-addr IPV6    Địa chỉ IPv6 tùy chọn.
  --port PORT              Số cổng.
  --config NODE-CONFIGURATION
                           Tệp cấu hình cho cardano-node.
  --validate-db            Xác thực tất cả các tệp cơ sở dữ liệu trên đĩa.
  --shutdown-ipc FD        Tắt tiến trình khi FD được thừa kế đạt EOF.
  --shutdown-on-slot-synced SLOT
                           Tắt tiến trình sau khi ChainDB đồng bộ đến khe được chỉ định.
  -h,--help                Hiển thị văn bản trợ giúp này.
```

## Tham số cardano-node

<Callout type="note">
  Trong phần này, chúng tôi sử dụng đường dẫn `$HOME/cardano` để lưu trữ tất cả các tệp liên quan đến `cardano-node` làm ví dụ. Vui lòng thay thế bằng
  thư mục bạn chọn để lưu trữ các tệp.
</Callout>

Chúng tôi sẽ tập trung vào sáu tham số dòng lệnh chính để chạy một nút:

**`--topology`**: Yêu cầu đường dẫn đến tệp `topology.json` mà bạn đã tải xuống như hướng dẫn [ở trên](#tệp-cấu-hình).

> Ví dụ: Nếu bạn đã tải tệp `topology.json` vào đường dẫn `$HOME/cardano/topology.json`, tham số sẽ như sau:
>
> ```
> --topology $HOME/cardano/topology.json
> ```

**`--database-path`**: Đường dẫn đến thư mục lưu trữ dữ liệu chuỗi khối thực tế như **khối**, **giao dịch**, **siêu dữ liệu**, và các loại dữ liệu khác được lưu trữ trong chuỗi khối Cardano. Chúng tôi sẽ khám phá cách truy vấn các loại dữ liệu này trong phần `cardano-db-sync`. **(Lưu ý: Liên kết tới phần cardano-db-sync chưa được thiết lập.)**

> Ví dụ: Nếu tất cả các tệp yêu cầu của `cardano-node` nằm trong `$HOME/cardano/`, bạn có thể tạo thư mục cơ sở dữ liệu bằng:
>
> ```bash
> mkdir -p $HOME/cardano/db
> ```
>
> Cấu trúc thư mục sẽ như sau:
>
> ```
> $HOME/cardano/
> ├── db
> ├── testnet-alonzo-genesis.json
> ├── testnet-byron-genesis.json
> ├── testnet-config.json
> ├── testnet-shelley-genesis.json
> └── testnet-topology.json
> 1 directory, 4 files
> ```
>
> Trong ví dụ này, chúng tôi sử dụng các tệp cấu hình `testnet` đã tải xuống thư mục `$HOME/cardano/`. Tham số sẽ là:
>
> ```
> --database-path $HOME/cardano/db
> ```
>
> Vui lòng tải xuống và di chuyển các tệp cấu hình vào thư mục Cardano của bạn như hiển thị để tiếp tục.

**`--socket-path`**: Đường dẫn đến `unix socket` (trên Linux/MacOS) hoặc `named pipe` (trên Windows) mà `cardano-node` sử dụng cho [IPC (Giao tiếp liên tiến trình)](https://en.wikipedia.org/wiki/Inter-process_communication).

> `cardano-node` sử dụng **IPC** để giao tiếp với các thành phần Cardano khác như `cardano-cli`, `cardano-wallet`, và `cardano-db-sync`. Trên **Linux** và **MacOS**, nó sử dụng [unix sockets](https://en.wikipedia.org/wiki/Unix_domain_socket); trên **Windows**, nó sử dụng [Named Pipes](https://docs.microsoft.com/en-us/windows/win32/ipc/named-pipes).
>
> Ví dụ tham số `--socket-path` trên **Linux**:
>
> ```
> --socket-path $HOME/cardano/db/node.socket
> ```
>
> Tham số trỏ đến một tệp **unix socket** trong thư mục `db` đã tạo.
>
> Trên **Windows**, tham số `--socket-path` sẽ như sau:
>
> ```
> --socket-path "\\\\.\\pipe\\cardano-node-testnet"
> ```
>
> Lưu ý rằng đây giống như một `URI` hoặc đường dẫn mạng. Bạn có thể thay thế `cardano-node-testnet` bằng bất kỳ chuỗi nào bạn muốn. Đường dẫn này được sử dụng trong [Daedalus Testnet Wallet](https://daedaluswallet.io) cho **Windows**.

**`--host-addr`**: Địa chỉ IP mà `cardano-node` sẽ chạy. Các nút khác sẽ sử dụng địa chỉ này trong tệp `topology.json` của chúng để kết nối với nút của bạn nếu bạn chạy nó như một nút `relay`.

> Ví dụ tham số `--host-addr`:
>
> ```
> --host-addr 192.168.0.1
> ```
>
> Trong trường hợp này, các nút trong mạng [LAN](https://en.wikipedia.org/wiki/Local_area_network) sẽ kết nối qua `192.168.0.1`, giả sử đó là địa chỉ IP của máy chạy `cardano-node`. Thay thế bằng địa chỉ IP thực của bạn. Nếu bạn không cần nút bên ngoài kết nối, sử dụng `127.0.0.1`. Nếu có nhiều giao diện mạng, bạn có thể dùng `0.0.0.0` để chấp nhận kết nối từ bất kỳ giao diện nào.

**`--port`**: Cổng mà `cardano-node` sẽ sử dụng để lắng nghe các kết nối đến.

> Ví dụ tham số `--port`:
>
> ```
> --port 1337
> ```
>
> Bạn có thể chọn bất kỳ cổng nào, nhưng nên dùng cổng từ `1024` trở lên. Xem [Registered Port](https://www.sciencedirect.com/topics/computer-science/registered-port) để biết thêm thông tin.

**`--config`**: Đường dẫn đến tệp cấu hình chính đã tải xuống trước đó.

> Ví dụ tham số `--config`:
>
> ```
> --config $HOME/cardano/testnet-config.json
> ```
>
> Đảm bảo rằng các tệp `alonzo-genesis.json`, `byron-genesis.json`, và `shelley-genesis.json` có trong đường dẫn được chỉ định trong tệp `config.json`.

Dưới đây là ví dụ thực tế để chạy `cardano-node`:

```bash
cardano-node run \
  --config $HOME/cardano/testnet-config.json \
  --database-path $HOME/cardano/db/ \
  --socket-path $HOME/cardano/db/node.socket \
  --host-addr 127.0.0.1 \
  --port 1337 \
  --topology $HOME/cardano/testnet-topology.json
```

Nếu thiết lập đúng, bạn sẽ thấy đầu ra tương tự như sau:

```plaintext
Listening on http://127.0.0.1:12798
[cardano.node.networkMagic:Notice:5] [2021-05-20 12:17:10.02 UTC] NetworkMagic 1097911063
[cardano.node.basicInfo.protocol:Notice:5] [2021-05-20 12:17:10.02 UTC] Byron; Shelley
[cardano.node.basicInfo.version:Notice:5] [2021-05-20 12:17:10.02 UTC] 1.XX.X
[cardano.node.basicInfo.commit:Notice:5] [2021-05-20 12:17:10.02 UTC] 9a7331cce5e8bc0ea9c6bfa1c28773f4c5a7000f
[cardano.node.basicInfo.nodeStartTime:Notice:5] [2021-05-20 12:17:10.02 UTC] 2021-05-20 12:17:10.024924 UTC
[cardano.node.basicInfo.systemStartTime:Notice:5] [2021-05-20 12:17:10.02 UTC] 2019-07-24 20:20:16 UTC
[cardano.node.basicInfo.slotLengthByron:Notice:5] [2021-05-20 12:17:10.02 UTC] 20s
[cardano.node.basicInfo.epochLengthByron:Notice:5] [2021-05-20 12:17:10.02 UTC] 21600
[cardano.node.basicInfo.slotLengthShelley:Notice:5] [2021-05-20 12:17:10.02 UTC] 1s
[cardano.node.basicInfo.epochLengthShelley:Notice:5] [2021-05-20 12:17:10.02 UTC] 432000
[cardano.node.basicInfo.slotsPerKESPeriodShelley:Notice:5] [2021-05-20 12:17:10.02 UTC] 129600
[cardano.node.basicInfo.slotLengthAllegra:Notice:5] [2021-05-20 12:17:10.02 UTC] 1s
[cardano.node.basicInfo.epochLengthAllegra:Notice:5] [2021-05-20 12:17:10.02 UTC] 432000
[cardano.node.basicInfo.slotsPerKESPeriodAllegra:Notice:5] [2021-05-20 12:17:10.02 UTC] 129600
[cardano.node.basicInfo.slotLengthMary:Notice:5] [2021-05-20 12:17:10.02 UTC] 1s
[cardano.node.basicInfo.epochLengthMary:Notice:5] [2021-05-20 12:17:10.02 UTC] 432000
[cardano.node.basicInfo.slotsPerKESPeriodMary:Notice:5] [2021-05-20 12:17:10.02 UTC] 129600
[cardano.node.addresses:Notice:5] [2021-05-20 12:17:10.05 UTC] [SocketInfo 0.0.0.0:9999,SocketInfo [::]:9999]
[cardano.node.diffusion-mode:Notice:5] [2021-05-20 12:17:10.05 UTC] InitiatorAndResponderDiffusionMode
[cardano.node.dns-producers:Notice:5] [2021-05-20 12:17:10.05 UTC] [DnsSubscriptionTarget {dstDomain = "relays-new.cardano-testnet.iohkdev.io", dstPort = 3001, dstValency = 2}]
[cardano.node.ip-producers:Notice:5] [2021-05-20 12:17:10.05 UTC] IPSubscriptionTarget {ispIps = [], ispValency = 0}
[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.06 UTC] Opened imm db with immutable tip at genesis (origin) and chunk 0
[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.06 UTC] Opened vol db
[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.06 UTC] Replaying ledger from genesis
[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.07 UTC] Opened lgr db
[cardano.node.ChainDB:Info:5] [2021-05-20 12:17:10.07 UTC] Opened db with immutable tip at genesis (origin) and tip genesis (origin)
[cardano.node.ChainDB:Notice:33] [2021-05-20 12:17:10.08 UTC] Chain extended, new tip: 1e64e74bd7ac76d6806480a28017deb0aedd356fb61844ec95c429ae2f30c7c3 at slot 0
```

Đồng bộ hóa chuỗi khối từ đầu có thể mất thời gian. Vui lòng kiên nhẫn. Để dừng đồng bộ hóa, nhấn `CTRL + C` trong terminal. Chạy lại lệnh `cardano-node` với các tham số đúng sẽ tiếp tục đồng bộ hóa.

## Truy vấn chuỗi khối Cardano

Sau khi chạy `cardano-node` và đồng bộ hóa, bạn có thể kiểm tra bằng cách truy vấn dữ liệu chuỗi khối, cho biết điểm hiện tại mà nút cục bộ của bạn đã đồng bộ. Để làm điều này, sử dụng `cardano-cli`.

Trước tiên, `cardano-cli` và các thành phần Cardano khác cần biết vị trí của socket nút. Trong ví dụ trước, chúng tôi đã lưu nó tại `$HOME/cardano/db/node.socket`. Các thành phần đọc biến môi trường `CARDANO_NODE_SOCKET_PATH` để xác định điều này.

Thêm dòng sau vào hồ sơ shell của bạn (`$HOME/.bashrc` hoặc `$HOME/.zshrc` trên **Linux/MacOS**, hoặc làm theo [hướng dẫn thiết lập biến môi trường trên Windows](https://phoenixnap.com/kb/windows-set-environment-variable)):

```bash
export CARDANO_NODE_SOCKET_PATH="$HOME/cardano/db/node.socket"
```

Tải lại shell/terminal để áp dụng thay đổi.

Bây giờ, bạn có thể kiểm tra trạng thái nút bằng lệnh:

- Đảm bảo `cardano-node` đang chạy trong một terminal riêng (nếu chưa chạy).
- Mở terminal mới và chạy:
  ```bash
  cardano-cli query tip --testnet-magic 1097911063
  ```

Đầu ra sẽ tương tự như:

```json
{
  "blockNo": 2598870,
  "headerHash": "e5be38153db4dc639134969e6449f37e105e0c5228f828f76a885968b4423aaf",
  "slotNo": 27149964
}
```

<Callout type="note">
  Chúng tôi sử dụng `--testnet-magic 1097911063` vì nút đang chạy trên `testnet`. Nếu truy vấn `mainnet`, hãy dùng `--mainnet` và đảm bảo nút của bạn
  được kết nối với mạng `mainnet`.
</Callout>

Dữ liệu này cho biết nút của bạn đã đồng bộ đến `blockNo: 2598870` và `slotNo: 27149964`.

Để kiểm tra xem bạn đã đồng bộ hoàn toàn chưa, truy cập **Cardano Blockchain Explorer** của mạng tương ứng:

### Mainnet Explorer

[https://explorer.cardano.org](https://explorer.cardano.org)

### Testnet Explorer

[https://explorer.cardano-testnet.iohkdev.io](https://explorer.cardano-testnet.iohkdev.io)

Cuộn xuống phần **Khối mới nhất** để xem khối mới nhất.

![Test](public/images/docs/integrate-cardano/latest-block.png)

Chúc mừng, bạn đã sẵn sàng khám phá thế giới **Cardano**! 🎉🎉🎉
